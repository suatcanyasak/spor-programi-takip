document.addEventListener("DOMContentLoaded",(()=>{let e=JSON.parse(localStorage.getItem("myWorkouts"))||{Pazartesi:[],SalÄ±:[],Ã‡arÅŸamba:[],PerÅŸembe:[],Cuma:[],Cumartesi:[],Pazar:[]};const t=()=>{localStorage.setItem("myWorkouts",JSON.stringify(e)),n()};document.getElementById("add-btn").onclick=()=>{const n=document.getElementById("day-select").value,o=document.getElementById("exercise-name").value,a=document.getElementById("sets").value,i=document.getElementById("value-per-set").value,r=document.getElementById("exercise-weight").value;if(!o||!a||!i)return alert("BoÅŸ alan bÄ±rakmayÄ±n!");e[n].push({id:Date.now(),name:o,weight:r||null,sets:parseInt(a),type:"reps"===document.getElementById("type-select").value?"Tekrar":"Dakika",value:parseInt(i),completed:!1}),t(),["exercise-name","exercise-weight","sets","value-per-set"].forEach((e=>document.getElementById(e).value=""))};const n=()=>{const o=document.getElementById("daily-planner");if(o){o.innerHTML="",Object.keys(e).forEach((t=>{const a=e[t],i=a.filter((e=>e.completed)).length,r=a.length>0?Math.round(i/a.length*100):0,l=document.createElement("div");l.className="day-card card",l.innerHTML=`<h4>${t} <span class="perc">%${r}</span></h4><div class="exercise-list"></div>`,a.forEach((n=>{const o=document.createElement("div");o.className=`exercise-item ${n.completed?"completed":""}`,o.innerHTML=`<div style="flex:1"><strong>${n.name}</strong><br><small>${n.weight?n.weight+"kg | ":""}${n.sets}x${n.value} ${n.type}</small></div><div class="actions"><input type="checkbox" ${n.completed?"checked":""}><button class="btn-delete" data-day="${t}" data-id="${n.id}">ğŸ—‘ï¸</button></div>`,o.querySelector("input").onchange=t=>{n.completed=t.target.checked,localStorage.setItem("myWorkouts",JSON.stringify(e)),n()},l.querySelector(".exercise-list").appendChild(o)})),o.appendChild(l)})),document.querySelectorAll(".btn-delete").forEach((n=>{n.onclick=()=>{const o=n.getAttribute("data-day"),a=n.getAttribute("data-id");e[o]=e[o].filter((e=>e.id!=a)),t()}}));const a=document.getElementById("total-progress-bar");let i=0,r=0;Object.values(e).forEach((e=>{i+=e.length,r+=e.filter((e=>e.completed)).length})),a&&(a.style.width=(i>0?r/i*100:0)+"%")}};document.getElementById("download-pdf").onclick=()=>{const t=document.getElementById("total-progress-bar").style.width;let n=`<div style="padding: 20px; font-family: sans-serif; color: #333;"><div style="text-align: center; border-bottom: 3px solid #4f46e5; padding-bottom: 10px; margin-bottom: 20px;"><h1 style="color: #4f46e5; margin: 0;">WeeklyGym GeliÅŸim Raporu</h1><p style="font-size: 16px; margin: 10px 0;">HaftalÄ±k Genel BaÅŸarÄ±: <b>%${parseInt(t)||0}</b></p><p style="font-size: 12px; color: #666;">Tarih: ${(new Date).toLocaleDateString("tr-TR")}</p></div>`;Object.keys(e).forEach((t=>{e[t].length>0&&(n+=`<div style="margin-bottom: 25px;"><h3 style="background: #f1f5f9; padding: 8px; border-left: 5px solid #4f46e5;">${t}</h3><table style="width: 100%; border-collapse: collapse; margin-top: 10px;"><thead><tr style="background: #f8fafc; border-bottom: 2px solid #ddd; text-align: left;"><th style="padding: 8px;">Egzersiz</th><th style="padding: 8px;">Detay</th><th style="padding: 8px; text-align: center;">Durum</th></tr></thead><tbody>`,e[t].forEach((e=>{const t=e.completed?"TAMAMLANDI":"EKSÄ°K",o=e.completed?"#10b981":"#ef4444";n+=`<tr style="border-bottom: 1px solid #eee;"><td style="padding: 10px;"><b>${e.name}</b></td><td style="padding: 10px;">${e.weight?e.weight+"kg | ":""}${e.sets}x${e.value}</td><td style="padding: 10px; text-align: center; font-weight: bold; color: ${o};">${t}</td></tr>`})),n+="</tbody></table></div>")})),n+='<p style="text-align: center; font-size: 10px; color: #999; margin-top: 30px;">WeeklyGym - Dijital Spor GÃ¼nlÃ¼ÄŸÃ¼</p></div>';const o=document.createElement("div");o.innerHTML=n,html2pdf().set({margin:10,filename:"WeeklyGym_Haftalik_Rapor.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(o).save()},document.getElementById("theme-toggle").onclick=()=>{document.body.classList.toggle("light-mode"),localStorage.setItem("theme",document.body.classList.contains("light-mode")?"light":"dark")},"light"===localStorage.getItem("theme")&&document.body.classList.add("light-mode"),document.getElementById("reset-all").onclick=()=>{confirm("TÃ¼m program silinsin mi?")&&(Object.keys(e).forEach((t=>e[t]=[])),t())},n()}));
